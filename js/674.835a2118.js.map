{"version":3,"file":"js/674.835a2118.js","mappings":"uMAEA,MAAMA,EAAeC,KAAM,QAAa,mBAAoBA,EAAIA,KAAK,UAAeA,GAE9EC,EAAa,CACjBC,MAAO,gCAEHC,EAAa,CACjBD,MAAO,cAEHE,EAAa,CACjBF,MAAO,aAGHG,EAA0BN,GAAa,KAAmB,IAAAO,GAAoB,MAAO,CACzFJ,MAAO,SACN,QAAS,KAENK,EAAa,CACjBC,IAAK,EACLN,MAAO,YAEHO,EAAa,CACjBP,MAAO,eACPQ,IAAK,YAEDC,EAAa,CAAC,OACdC,EAAa,CAAC,MAAO,WAErBC,EAA0Bd,GAAa,KAAmB,IAAAO,GAAoB,MAAO,CACzFJ,MAAO,aACN,EAAc,IAAAI,GAAoB,MAAO,CAC1CJ,MAAO,SACN,WAAY,KAETY,EAAc,CAClBZ,MAAO,gBAEHa,EAAc,CAAC,OACfC,EAAc,CAAC,MAAO,WACrB,SAASC,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,MAAMC,EAA4B,IAElC,OAAO,WAAc,QAAoB,MAAOvB,EAAY,EAAC,QAAauB,EAA2B,CACnGC,MAAOJ,EAAOK,SAAW,OAAS,QACjC,CACDC,WAAW,SAAS,IAAM,EAAC,IAAArB,GAAoB,MAAO,CACpDJ,MAAO,aACP0B,QAAST,EAAO,KAAOA,EAAO,GAAKU,GAAUR,EAAOK,UAAYL,EAAOK,YACtE,QAAiBL,EAAOK,SAAW,KAAO,MAAO,MACpDpB,EAAG,GACF,EAAG,CAAC,WAAW,IAAAA,GAAoB,MAAOH,EAAY,EAAC,IAAAG,GAAoB,UAAW,KAAM,EAAC,IAAAA,GAAoB,MAAOF,EAAY,CAACC,EAAYgB,EAAOK,WAAY,WAAc,QAAoB,MAAOnB,EAAY,YAAa,QAAoB,IAAI,MAAS,IAAAD,GAAoB,MAAOG,EAAY,GAAE,SAAW,IAAO,QAAoB,KAAW,MAAM,QAAYY,EAAOS,KAAKC,OAAO,CAACC,EAAMC,MACvY,WAAc,QAAoB,MAAO,CAC9C/B,MAAO,OACPM,IAAKyB,GACJ,EAAC,IAAA3B,GAAoB,MAAO,CAC7B4B,IAAKF,EAAKG,MACT,KAAM,EAAGxB,IAAa,IAAAL,GAAoB,OAAQ,MAAM,QAAiB0B,EAAKP,OAAQ,IAAI,SAAgB,IAAAnB,GAAoB,MAAO,CACtIJ,MAAO,eACPgC,IAAK,EAAQ,MACbN,QAASC,GAAUR,EAAOe,YAAYH,IACrC,KAAM,EAAGrB,GAAa,CAAC,CAAC,KAAQS,EAAOK,iBACxC,OAAQ,QAAQ,IAAApB,GAAoB,UAAW,KAAM,CAACO,GAAY,IAAAP,GAAoB,MAAOQ,EAAa,GAAE,SAAW,IAAO,QAAoB,KAAW,MAAM,QAAYO,EAAOS,KAAKO,OAAO,CAACL,EAAMC,MACpM,WAAc,QAAoB,MAAO,CAC9C/B,MAAO,OACPM,IAAKyB,GACJ,EAAC,IAAA3B,GAAoB,MAAO,CAC7B4B,IAAKF,EAAKG,MACT,KAAM,EAAGpB,IAAc,IAAAT,GAAoB,OAAQ,MAAM,QAAiB0B,EAAKP,OAAQ,IAAI,SAAgB,IAAAnB,GAAoB,MAAO,CACvIJ,MAAO,eACPgC,IAAK,EAAQ,MACbN,QAASC,GAAUR,EAAOiB,SAASL,IAClC,KAAM,EAAGjB,GAAc,CAAC,CAAC,KAAQK,EAAOK,iBACzC,aACN,C,gCCtEA,GACEa,KAAM,4BACNC,WAAY,CACVC,cAAa,KAGfC,MAAMC,EAAOC,GACX,MAAMC,GAAQ,UACRf,GAAO,QAAS,CACpBC,MAAO,IAAIc,EAAMC,MAAMC,UAAUhB,OACjCM,MAAO,IAAIQ,EAAMC,MAAMC,UAAUV,OACjCW,QAAQ,IAEJC,GAAW,QAAI,MACfvB,GAAW,SAAI,GAEfU,EAAcH,IAClB,MAAMiB,EAAMpB,EAAKC,MAAME,GACvBH,EAAKC,MAAMoB,OAAOlB,EAAO,GACzBH,EAAKO,MAAMe,KAAKF,EAAI,EAGhBZ,EAAWL,IACf,MAAMiB,EAAMpB,EAAKO,MAAMJ,GACvBH,EAAKO,MAAMc,OAAOlB,EAAO,GACzBH,EAAKC,MAAMqB,KAAKF,EAAI,EAGhBG,EAAe,CAACC,EAAUC,KAC9B,MAAMC,EAAS1B,EAAKC,MAAM0B,KAAI,CAACzB,EAAMC,IAC5BA,IAEHyB,EAAWF,EAAOF,GAEpBA,EAAWC,GACbC,EAAOL,OAAOI,EAAW,EAAG,EAAGG,GAC/BF,EAAOL,OAAOG,EAAU,KAExBE,EAAOL,OAAOI,EAAU,EAAGG,GAC3BF,EAAOL,OAAOO,EAAW,EAAG,IAG9B,MAAMC,EAAWH,EAAOC,KAAIzB,IACnB,IAAKF,EAAKC,MAAMC,OAGzBF,EAAKC,MAAQ,IACb,SAAS,KACPD,EAAKC,MAAQ4B,CAAQ,GACrB,EAGJ,IAAIC,EAAW,KA6Bf,OA5BA,QAAMlC,GAAU,CAACmC,EAAOH,EAAUI,KAC5BD,EACFD,EAAW,YAAgBX,EAASY,MAAO,CACzCE,MAAM,EACNC,UAAW,IACXC,QAAS,SAAUC,GACjBA,EAAIlC,KAAKmC,MAAMC,gBAAkB,GAEjC,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAIlC,KAAKsC,SAASC,OAAQF,IAC5CH,EAAIlC,KAAKsC,SAASD,GAAGF,MAAMK,QAAU,MAEzC,EACAC,MAAO,SAAUP,GACfQ,QAAQC,IAAI,SACZT,EAAIlC,KAAKmC,MAAMC,gBAAkB,QAEjC,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAIlC,KAAKsC,SAASC,OAAQF,IAC5CH,EAAIlC,KAAKsC,SAASD,GAAGF,MAAMK,QAAU,GAGvCnB,EAAaa,EAAIZ,SAAUY,EAAIX,SACjC,KAGFK,EAASgB,UACT/B,EAAMgC,OAAO,sBAAuB,CAAC/C,EAAKC,MAAOD,EAAKO,QACxD,IAEK,CACLX,WACAU,cACAE,WACAW,WACAW,WACAf,QACAf,OACAuB,eAEJ,G,QCxFF,MAAMyB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS7D,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://app_test/./src/main-module/management/workbench/controller/AllModuleEditorController.vue?beb9","webpack://app_test/./src/main-module/management/workbench/controller/AllModuleEditorController.vue","webpack://app_test/./src/main-module/management/workbench/controller/AllModuleEditorController.vue?2daa"],"sourcesContent":["import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9ad9a940\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"all-module-editor-controller\"\n};\nconst _hoisted_2 = {\n  class: \"table-view\"\n};\nconst _hoisted_3 = {\n  class: \"title-box\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"title\"\n}, \"首页应用\", -1));\n\nconst _hoisted_5 = {\n  key: 0,\n  class: \"subtitle\"\n};\nconst _hoisted_6 = {\n  class: \"content-view\",\n  ref: \"itemList\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = [\"src\", \"onClick\"];\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"title-box\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"title\"\n}, \"未添加应用\")], -1));\n\nconst _hoisted_10 = {\n  class: \"content-view\"\n};\nconst _hoisted_11 = [\"src\"];\nconst _hoisted_12 = [\"src\", \"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_navigation_bar = _resolveComponent(\"navigation-bar\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_navigation_bar, {\n    title: $setup.isEditor ? '编辑应用' : '应用中心'\n  }, {\n    rightItem: _withCtx(() => [_createElementVNode(\"div\", {\n      class: \"right-item\",\n      onClick: _cache[0] || (_cache[0] = $event => $setup.isEditor = !$setup.isEditor)\n    }, _toDisplayString($setup.isEditor ? '保存' : '管理'), 1)]),\n    _: 1\n  }, 8, [\"title\"]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"section\", null, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, $setup.isEditor ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \"长按拖动排序\")) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.data.myApp, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"item\",\n      key: index\n    }, [_createElementVNode(\"img\", {\n      src: item.icon\n    }, null, 8, _hoisted_7), _createElementVNode(\"span\", null, _toDisplayString(item.title), 1), _withDirectives(_createElementVNode(\"img\", {\n      class: \"deleteAndAdd\",\n      src: require('@/assets/management_img/ico-删除@2x.png'),\n      onClick: $event => $setup.deleteEvent(index)\n    }, null, 8, _hoisted_8), [[_vShow, $setup.isEditor]])]);\n  }), 128))], 512)]), _createElementVNode(\"section\", null, [_hoisted_9, _createElementVNode(\"div\", _hoisted_10, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.data.noApp, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"item\",\n      key: index\n    }, [_createElementVNode(\"img\", {\n      src: item.icon\n    }, null, 8, _hoisted_11), _createElementVNode(\"span\", null, _toDisplayString(item.title), 1), _withDirectives(_createElementVNode(\"img\", {\n      class: \"deleteAndAdd\",\n      src: require('@/assets/management_img/ico-添加@2x.png'),\n      onClick: $event => $setup.addEvent(index)\n    }, null, 8, _hoisted_12), [[_vShow, $setup.isEditor]])]);\n  }), 128))])])])]);\n}","import NavigationBar from '@/components/NavigationBar';\nimport { nextTick, reactive, ref, watch } from 'vue';\nimport Sortable from 'sortablejs';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'AllModuleEditorController',\n  components: {\n    NavigationBar\n  },\n\n  setup(props, context) {\n    const store = useStore();\n    const data = reactive({\n      myApp: [...store.state.workbench.myApp],\n      noApp: [...store.state.workbench.noApp],\n      reload: true\n    });\n    const itemList = ref(null);\n    const isEditor = ref(false);\n\n    const deleteEvent = index => {\n      const app = data.myApp[index];\n      data.myApp.splice(index, 1);\n      data.noApp.push(app);\n    };\n\n    const addEvent = index => {\n      const app = data.noApp[index];\n      data.noApp.splice(index, 1);\n      data.myApp.push(app);\n    };\n\n    const swapAppEvent = (oldIndex, newIndex) => {\n      const source = data.myApp.map((item, index) => {\n        return index;\n      });\n      const oldValue = source[oldIndex];\n\n      if (oldIndex < newIndex) {\n        source.splice(newIndex + 1, 0, oldValue);\n        source.splice(oldIndex, 1);\n      } else {\n        source.splice(newIndex, 0, oldValue);\n        source.splice(oldValue + 1, 1);\n      }\n\n      const newMyApp = source.map(item => {\n        return { ...data.myApp[item]\n        };\n      });\n      data.myApp = [];\n      nextTick(() => {\n        data.myApp = newMyApp;\n      });\n    };\n\n    let sortable = null;\n    watch(isEditor, (value, oldValue, onCleanup) => {\n      if (value) {\n        sortable = Sortable.create(itemList.value, {\n          sort: true,\n          animation: 150,\n          onStart: function (evt) {\n            evt.item.style.backgroundColor = '';\n\n            for (let i = 0; i < evt.item.children.length; i++) {\n              evt.item.children[i].style.display = 'none';\n            }\n          },\n          onEnd: function (evt) {\n            console.log('onEnd');\n            evt.item.style.backgroundColor = 'white';\n\n            for (let i = 0; i < evt.item.children.length; i++) {\n              evt.item.children[i].style.display = '';\n            }\n\n            swapAppEvent(evt.oldIndex, evt.newIndex);\n          }\n        });\n      } else {\n        sortable.destroy();\n        store.commit('workbench/updateApp', [data.myApp, data.noApp]);\n      }\n    });\n    return {\n      isEditor,\n      deleteEvent,\n      addEvent,\n      itemList,\n      sortable,\n      store,\n      data,\n      swapAppEvent\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import { render } from \"./AllModuleEditorController.vue?vue&type=template&id=9ad9a940&scoped=true\"\nimport script from \"./AllModuleEditorController.vue?vue&type=script&lang=js\"\nexport * from \"./AllModuleEditorController.vue?vue&type=script&lang=js\"\n\nimport \"./AllModuleEditorController.vue?vue&type=style&index=0&id=9ad9a940&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/mac/gree-cloud-batch-vue-h5/app_test/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9ad9a940\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_","_hoisted_5","key","_hoisted_6","ref","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","render","_ctx","_cache","$props","$setup","$data","$options","_component_navigation_bar","title","isEditor","rightItem","onClick","$event","data","myApp","item","index","src","icon","deleteEvent","noApp","addEvent","name","components","NavigationBar","setup","props","context","store","state","workbench","reload","itemList","app","splice","push","swapAppEvent","oldIndex","newIndex","source","map","oldValue","newMyApp","sortable","value","onCleanup","sort","animation","onStart","evt","style","backgroundColor","i","children","length","display","onEnd","console","log","destroy","commit","__exports__"],"sourceRoot":""}